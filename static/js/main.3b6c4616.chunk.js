(this["webpackJsonpuse-redux-states-example"]=this["webpackJsonpuse-redux-states-example"]||[]).push([[0],{22:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);n(22);var c=n(1),r=n(7),s=n.n(r),u=n(2),a=n(19);const o={sated:"yes"};var i=(e=o,{type:t,payload:n,name:c})=>e,l=n(20),j=n(4),b=n(3),d=n(5),O=n(6),v=n(15),p=n.n(v);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}var h="_use_redux_state",f={},m=function(e){return e},_=function(e){return"string"==typeof e},y=function(e,t,n){return void 0===n&&(n=m),n(C(null==e?void 0:e.getState(),t))},g=function(e,t,n,c){return e(t(n,c))},S=function(e,t,n){return{type:"_use_redux_state/setState",payload:t,name:e,reducer:n}},C=function(e,t){return Object(b.get)(null==e?void 0:e[h],t)},k=function(){return f.setter||I},P=function e(t,n,c){void 0===c&&(c=0);var r=n.map?n:n.split(".");return c+1>=r.length?delete t[r[c]]:e(t[r[c]],r,++c)},w=function e(t,n,c,r){void 0===r&&(r=0);var s=n.map?n:n.split(".");return r+1>=s.length?(t[s[r]]=c,t):(void 0===t[s[r]]&&(t[s[r]]={}),e(t[s[r]],s,c,++r))},I=function(e,t){switch(null==e?void 0:e.constructor){case Object:return(null==t?void 0:t.constructor)===Object?x({},e,t):t;case Array:return(null==t?void 0:t.constructor)===Array?[].concat(e,t):t;default:return t}},M=Object(l.a)({name:h,initialState:{redux_state_subscriptions:{}},reducers:{setState:function(e,t){var n=t.name,c=t.payload,r=t.reducer;w(e,n,r?r(Object(b.get)(e,n),c):"function"==typeof c?c(Object(b.get)(e,n)):k()(Object(b.get)(e,n),c))},cleanup:function(e,t){var n=t.name;Object(b.get)(e,n)&&P(e,n),Object(b.get)(e.redux_state_subscriptions,n)&&P(e.redux_state_subscriptions,n)},subscribe:function(e,t){var n=t.payload,c=t.name,r=t.cleanup,s=t.reducer,u=Object(b.get)(e.redux_state_subscriptions,c,0);(void 0!==n||s)&&w(e,c,s?s(Object(b.get)(e,c),n):k()(Object(b.get)(e,c),n)),(u<1||r)&&w(e.redux_state_subscriptions,c,u+1)},unsubscribe:function(e,t){var n=t.name,c=t.cleanup,r=e.redux_state_subscriptions,s=Object(b.get)(e.redux_state_subscriptions,n,0);s<2&&c?(Object(b.get)(e,n)&&P(e,n),Object(b.get)(r,n)&&P(r,n)):w(e.redux_state_subscriptions,n,s-1)}}}).reducer,A=function(e,t,n){return void 0===t&&(t=m),void 0===n&&(n=p.a),Object(d.c)(Object(O.a)(_(e)?function(t){return C(t,e)}:e,t),n)},U=function(e,t){var n=Object(d.d)(),r=Object(d.b)(),s=Object(c.useMemo)((function(){return _(e)?e:(null==e?void 0:e.name)||(new Date).getTime()}),[e]),u=Object(c.useCallback)((function(e,t){return S(s,e,t)}),[s]),a=Object(c.useCallback)((function(e){return{type:"_use_redux_state/cleanup",payload:e,name:s}}),[s]),o=Object(c.useCallback)((function(e,t){return void 0===t&&(t={}),x({type:"_use_redux_state/subscribe",payload:e,name:s},t)}),[s]),i=Object(c.useCallback)((function(e,t){return void 0===t&&(t={}),x({type:"_use_redux_state/unsubscribe",payload:e,name:s},t)}),[s]),l=Object(c.useCallback)((function(e){return void 0===e&&(e=m),y(n,s,e)}),[s]),j=Object(c.useCallback)((function(){var n=_(e)?t:null==e?void 0:e.state;return"function"==typeof n?n(l()):n}),[null==e?void 0:e.state,t]),O=Object(c.useCallback)((function(e,t){return g(r,u,e,t)}),[r,u]),v=Object(c.useCallback)((function(e){var t=C(e,s);return void 0!==t?t:j()}),[s]),p=Object(c.useCallback)((function(){return r(a())}),[a]),k=Object(c.useCallback)((function(){return Object(b.get)(null==n?void 0:n.getState()[h].redux_state_subscriptions,s,0)}),[s]);return Object(c.useLayoutEffect)((function(){if(null==e||!e.unmount){var t=j();if(void 0===e||(null==e?void 0:e.cleanup)||void 0===(null==e?void 0:e.cleanup)&&(null==f?void 0:f.cleanup))return r(o(t,{cleanup:!0,reducer:null==e?void 0:e.reducer})),function(){return r(i(void 0,{cleanup:!0}))};(k()<1||void 0!==t)&&r(o(t,{cleanup:!1,reducer:null==e?void 0:e.reducer}))}}),[s,null==e?void 0:e.unmount]),{selector:v,setState:O,getState:l,action:u,cleanup:p,useMemoSelector:A}};var D=function(e){var t;return Object(j.b)(x({},e,((t={})[h]=M,t)))}({state:i});const N=Object(a.a)({reducer:D,middleware:e=>e({serializableCheck:{ignoredActions:["_use_redux_state/setState","_use_redux_state/subscribe"]}})});var E;void 0===(E={cleanup:!0,setter:(e,t)=>{switch(console.log("using custom setter for type "+typeof state),null===e||void 0===e?void 0:e.constructor){case Object:return(null===t||void 0===t?void 0:t.constructor)===Object?Object(u.a)(Object(u.a)({},e),t):t;case Array:return(null===t||void 0===t?void 0:t.constructor)===Array?[...e,...t]:t;default:return t}}})&&(E={cleanup:!0}),Object.keys(E).map((function(e){return f[e]=E[e]}));var R=N,z=n(21),J=n(18),T=n(0);const B=()=>{const e=U("component_state",{count:1,locale:"en_US"}),t=e.selector,n=e.setState,c=A(t),r=c.locale,s=c.count;return Object(T.jsxs)("div",{children:[Object(T.jsxs)("h6",{children:["Current Count: ",s]}),Object(T.jsx)("input",{onChange:({target:{value:e}})=>n({locale:e}),value:r}),Object(T.jsx)("button",{onClick:()=>n((e=>Object(u.a)(Object(u.a)({},e),{},{count:s+1}))),children:"Increment Count"})]})},L=()=>{const e=U("setter.type.int",1),t=e.selector,n=e.setState,c=A(t);return Object(T.jsx)("div",{children:Object(T.jsx)("input",{type:"number",onChange:({target:{value:e}})=>n(e),value:c})})},V=()=>{const e=Object(c.useState)(!0),t=Object(J.a)(e,2),n=t[0],r=t[1],s=U({name:"mount.control",state:{value:"unmounted value"},unmount:n}),a=s.selector,o=s.setState,i=A(a).value;return Object(T.jsxs)("div",{children:[Object(T.jsxs)("h6",{children:["unMounted: ",null===n||void 0===n?void 0:n.toString()]}),Object(T.jsx)("input",{onChange:({target:{value:e}})=>o((t=>Object(u.a)(Object(u.a)({},t),{},{value:e}))),value:i}),Object(T.jsx)("button",{onClick:()=>r(!n),children:"Toggle Mount"})]})},q=()=>{const e=U({name:"nested.state",state:1}),t=e.selector,n=e.setState,c=A(t);return Object(T.jsxs)("div",{children:[Object(T.jsxs)("h6",{children:["Nested State Value: ",c]}),Object(T.jsx)("button",{onClick:()=>n((e=>++e)),children:"Increase Nested State"})]})},F=()=>{const e=U("array_state",[1,2]),t=e.selector,n=e.setState,c=A(t);return Object(T.jsxs)("div",{children:[Object(T.jsxs)("h6",{children:["arrays: ",null===c||void 0===c?void 0:c.map((e=>e+", "))]}),Object(T.jsx)($,{onPress:()=>n((e=>e?[...e,(e.pop()||0)+1]:[1,2,3])),title:"Increase Array"}),Object(T.jsx)($,{onPress:()=>n((e=>e?e.slice(0,e.length-1):[1,2,3])),title:"Decrease Array"}),Object(T.jsx)($,{onPress:()=>n(),title:"Reset Array"})]})},G=()=>{const e=U("component1_state",{count:1}),t=e.selector,n=e.setState,c=A(t,(e=>e.count));return Object(T.jsxs)("div",{children:[Object(T.jsxs)("h6",{children:["count: ",c]}),Object(T.jsx)($,{onPress:()=>n({count:c+1}),title:"Increment"})]})},H=()=>{const e=A("component1_state");return Object(T.jsx)(Z,{title:"current component 1 state is: "+(null===e||void 0===e?void 0:e.count)})},K=()=>(U("independent_state",{independent:1,portion:10}),Object(T.jsx)(Z,{title:"I have initialized state"})),Q=()=>{const e=Object(c.useRef)(0);e.current=e.current+1;const t=U("independent_state").selector,n=A(t,(e=>null===e||void 0===e?void 0:e.independent));return Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{title:"i am depending on Independent component state which is: "+n}),Object(T.jsx)(Z,{title:"i have rendered ".concat(e.current," times")})]})},W=()=>{const e=U({name:"independent_state",state:{portion:10},reducer:(e,t)=>e?Object(u.a)(Object(u.a)({},e),t):{payload:t}}),t=e.selector,n=e.setState,r=function(e){var t=Object(d.b)(),n=Object(c.useCallback)((function(t,n){return S(e,t,n)}),[e]);return Object(c.useCallback)((function(e,c){return g(t,n,e,c)}),[t,n])}("component1_state"),s=A(t,(e=>null===e||void 0===e?void 0:e.portion));return Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{title:"i am depending only on a portion of a state which is: "+s}),Object(T.jsxs)(ee,{children:[Object(T.jsx)($,{onPress:()=>n(10,((e,t)=>Object(u.a)(Object(u.a)({},e),{},{portion:e.portion+t}))),title:"Set Portion"}),Object(T.jsx)($,{onPress:()=>r(2,((e,t)=>Object(u.a)(Object(u.a)({},e),{},{count:e.count+t}))),title:"Set Component 1 state by 2"})]})]})},X=()=>{const e=U({name:"cleanable.state",state:{current:1},reducer:(e,t)=>e||t}),t=e.selector,n=e.setState,r=function(e){var t=Object(d.d)();return Object(c.useCallback)((function(n){return y(t,e,n)}),[e,t])}("cleanable.state"),s=A(t);return Object(c.useEffect)((()=>{const e=r((e=>e));console.log({state:e})}),[r]),Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{title:"my state should be cleaned up when i unmount: "+(null===s||void 0===s?void 0:s.current)}),Object(T.jsxs)(ee,{children:[Object(T.jsx)($,{onPress:()=>n(3,(({current:e},t)=>({current:e+t}))),title:"Increase Mountable State"}),Object(T.jsx)($,{onPress:()=>n(3,(({current:e},t)=>({current:e-t}))),title:"Decrease Mountable State"})]})]})},Y=()=>{const e=U({name:"uncleanable.state",state:e=>e||{current:1},cleanup:!1}),t=e.selector,n=e.setState,c=A(t);return Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{title:"my state should not be cleaned up when i unmount: "+(null===c||void 0===c?void 0:c.current)}),Object(T.jsxs)(ee,{children:[Object(T.jsx)($,{onPress:()=>n((({current:e})=>({current:e+3}))),title:"Increase Uncleanable State"}),Object(T.jsx)($,{onPress:()=>n((({current:e})=>({current:e-3}))),title:"Decrease Uncleanable State"})]})]})},Z=e=>Object(T.jsx)("p",Object(u.a)(Object(u.a)({},e),{},{children:e.title})),$=e=>{let t=e.onPress,n=Object(z.a)(e,["onPress"]);return Object(T.jsx)("button",Object(u.a)(Object(u.a)({},n),{},{onClick:t,children:n.title}))},ee=({children:e})=>Object(T.jsx)("div",{className:"row",children:e}),te=({text:e})=>Object(T.jsxs)("div",{className:"test",children:["Example Component: ",e]});var ne=()=>{const e=U({name:"mounted",state:!0}),t=e.selector,n=e.setState,c=A(t);return Object(T.jsxs)("div",{className:"",children:[Object(T.jsx)(te,{text:"Use Redux States \ud83d\ude04"}),Object(T.jsxs)("div",{className:"body",children:[Object(T.jsx)("h2",{children:"Usage Samples"}),Object(T.jsx)(G,{}),Object(T.jsx)(F,{}),Object(T.jsx)(H,{}),Object(T.jsx)("h2",{children:"State Dependency"}),Object(T.jsx)(K,{}),Object(T.jsx)(Q,{}),Object(T.jsx)(W,{}),Object(T.jsx)("h2",{children:"State Cleanup"}),c&&Object(T.jsx)(X,{}),c&&Object(T.jsx)(Y,{}),Object(T.jsx)($,{onPress:()=>n((e=>!e)),title:c?"UnMount":"Mount"}),Object(T.jsx)("h2",{children:"Usage"}),Object(T.jsx)(B,{}),Object(T.jsx)("h2",{children:"Default Setter"}),Object(T.jsx)(L,{}),Object(T.jsx)("h2",{children:"Redux State Mount Control"}),Object(T.jsx)("p",{children:"input will have initial value when mounted"}),Object(T.jsx)(V,{}),Object(T.jsx)(q,{})]})]})};s.a.render(Object(T.jsx)(d.a,{store:R,children:Object(T.jsx)(ne,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.3b6c4616.chunk.js.map